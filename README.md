# Fireworks_OpenGL å®ç°çƒŸèŠ±ç²’å­ç³»ç»Ÿ
SYSU Computer Graphics Final Project

è¿™ä¸ªé€‰é¢˜ä¸»è¦æ˜¯å…³äºç²’å­ç‰¹æ•ˆçš„æ„å»ºæ–¹é¢ï¼Œä½ å¯ä»¥æ„å»ºä¸€ä¸ªä¸‰ç»´çš„ç²’å­ç³»ç»Ÿï¼Œä¹Ÿå¯ä»¥æ„å»ºä¸€ä¸ªäºŒç»´
çš„ç²’å­ç³»ç»Ÿï¼ˆä½¿ç”¨çš„æ¸²æŸ“åº“ä¸é™ï¼Œä½†ä¸å¾—ç›´æ¥å¥—ç”¨æ¸¸æˆå¼•æ“åº“çš„ç²’å­ç³»ç»Ÿï¼Œä½¿ç”¨æ¸¸æˆå¼•æ“çš„è¯ï¼Œç²’å­ç³»
ç»Ÿå¿…é¡»æ˜¯è‡ªå·±æ„å»ºçš„ï¼‰ã€‚åœ¨æœ¬é€‰é¢˜ä¸­ï¼Œä½ å°†æ„å»ºä¸€ä¸ªçƒŸèŠ±çš„ç²’å­ç³»ç»Ÿï¼ŒçƒŸèŠ±çš„ç±»å‹ç”±ä½ è‡ªå·±å®š

å‚è€ƒå®ç°çš„åŠŸèƒ½ï¼ˆæœ€å¥½éƒ½å®ç°å§ï¼‰ï¼š
- æ„å»ºçƒŸèŠ±ç²’å­æ¨¡å‹ï¼šä¸è¦æ±‚ä½ ä½¿ç”¨GPUåŠ é€Ÿï¼Œä½ åªéœ€åœ¨CPUä¸Šå®ç°çƒŸèŠ±ç²’å­ç³»ç»Ÿå³å¯
- æ·»åŠ å¤©ç©ºç›’ï¼šæ·»åŠ ä¸€ä¸ªé»‘å¤œçš„å¤©ç©ºç›’ä½œä¸ºèƒŒæ™¯
- æ·»åŠ ä¸€ä¸ªåœ°é¢ï¼šä¸ºäº†ä½¿å¾—åœºæ™¯ä¸é‚£ä¹ˆçªå…€ï¼Œä½ åªéœ€æ·»åŠ ä¸€ä¸ªå¹³é¢ä½œä¸ºåœ°é¢
- å®ç°çƒŸèŠ±å…‰ç…§ï¼šä¸ºäº†å®ç°çƒŸèŠ±çˆ†ç‚¸ç¬é—´çš„å…‰è¾‰ç’€ç’¨ï¼Œä½ éœ€è¦åœ¨æ¯æœµçƒŸèŠ±çš„çˆ†ç‚¸ä¸­å¿ƒæ¿€æ´»ä¸€ä¸ªç‚¹å…‰
æºï¼Œå°†è¯¥ç‚¹å…‰æºçš„é¢œè‰²é€‰å®šä¸ºçƒŸèŠ±çš„é¢œè‰²ï¼Œçˆ†ç‚¸ç»“æŸåå†åˆ é™¤è¿™ä¸ªç‚¹å…‰æºã€‚åœ°é¢éœ€è¦å®ç°å…‰ç…§ï¼ˆä¼ 
ç»ŸBlinn-Phongå…‰ç…§å³å¯ï¼‰ï¼Œä»è€Œå‡¸æ˜¾çƒŸç«é—ªçƒçš„æ•ˆæœ
- å®ç°è¾‰å…‰ç‰¹æ•ˆï¼šä½¿ç”¨é«˜æ–¯æ¨¡ç³Šä¹‹ç±»çš„åå¤„ç†æŠ€æœ¯å®ç°çƒŸèŠ±å‘¨å›´çš„å…‰æ™•ç‰¹æ•ˆï¼Œå¯å‚è€ƒè¿™ä¸ª
- æ·»åŠ éŸ³æ•ˆï¼šåœ¨çƒŸèŠ±çˆ†ç‚¸çš„æ—¶å€™æ·»åŠ ä¸€ä¸ªBoomçš„éŸ³æ•ˆ

å‚è€ƒèµ„æ–™ï¼š
- Coding Challenge #27: Fireworks! ï¼ˆéœ€è¦ç§‘å­¦ä¸Šç½‘ï¼‰
- Particle System

## åˆæ­¥æƒ³æ³•
åšä¸€ä¸ªå¤šç§çƒŸèŠ±ç±»å‹çš„ä¸‰ç»´çƒŸèŠ±ç²’å­ç³»ç»Ÿï¼Œä¼šæœ‰å¤šä¸ªé”®ä½ç»‘å®šä¸åŒçƒŸèŠ±ç±»å‹ï¼Œåç»­æœ‰æ—¶é—´ä¼šåŠ ä¸Šé¼ æ ‡ç‚¹å‡»ä½ç½®å‘å°„çƒŸèŠ±åŠŸèƒ½



## é¡¹ç›®æ„å»º



------

### ğŸ—‚ é¡¹ç›®ç»“æ„

```
Fireworks_OpenGL/
â”‚â”€â”€ Fireworks_OpenGL/
â”‚   â”‚â”€â”€ src/         ï¼ˆæ‰€æœ‰ .cppï¼‰
â”‚   â”‚â”€â”€ include/     ï¼ˆæ‰€æœ‰ .hï¼‰
|   â”‚â”€â”€ assets/
|   â”‚   â”œâ”€â”€ shaders/
|   â”‚   â”œâ”€â”€ textures/
|   â”‚   â”œâ”€â”€ skybox/
|   â”‚   â”œâ”€â”€ sounds/
|   â”‚â”€â”€ external/        ï¼ˆç¬¬ä¸‰æ–¹åº“ï¼‰
|   â”‚   â”œâ”€â”€ glfw/
|   â”‚   â”œâ”€â”€ glad/
|   â”‚   â”œâ”€â”€ glm/
â”‚â”€â”€ x64/			ï¼ˆä¸ç”¨è‡ªå·±åˆ›å»ºï¼‰
â”‚â”€â”€ Fireworks.sln
â”‚â”€â”€ .gitignore
â”‚â”€â”€ README.md
```

------

### ğŸ“¦ å®‰è£… GLFW

#### Step 1ï¼šä¸‹è½½ GLFW

å»å®˜ç½‘ä¸‹è½½ï¼š
 https://www.glfw.org/download.html

ä¸‹è½½ **Source package**
 è§£å‹åˆ°ï¼š

```
external/glfw
```

#### Step 2ï¼šç”¨ CMake ç”Ÿæˆ VS å·¥ç¨‹

1. æ‰“å¼€ CMake GUI
2. Source path è®¾ç½®ä¸º `external/glfw/glfw-3.4`
3. Build path è®¾ç½®ä¸º `external/glfw/glfw-3.4/build`
4. ç‚¹å‡» **Configure**
5. ç‚¹å‡» **Generate**
6. æ‰“å¼€ç”Ÿæˆçš„ `GLFW.sln`
7. åœ¨ VS ä¸­ç¼–è¯‘ä¸º **Release | x64**ï¼Œä¼šç”Ÿæˆ `glfw3.lib`

è¾“å‡ºè·¯å¾„åœ¨ï¼š

```
external/glfw/glfw-3.4/build/src/Release/glfw3.lib
```

------

### ğŸ§° å®‰è£… GLADï¼ˆå¤´æ–‡ä»¶ + æºæ–‡ä»¶æ–¹å¼ï¼‰

#### Step 1ï¼šåœ¨çº¿ç”Ÿæˆ GLAD

ç½‘ç«™ï¼š[https://glad.dav1d.de](https://glad.dav1d.de/)

é…ç½®ï¼š

- **APIï¼šOpenGL 4.1**
- Profileï¼šCore
- Languageï¼šC/C++
- ç”Ÿæˆï¼ˆGenerateï¼‰

ç‚¹å‡»generateä¸‹è½½ ZIPï¼Œè§£å‹åˆ°ï¼š

```
external/glad
```

ä½ ä¼šçœ‹åˆ°ï¼š

```
external/glad/include/glad/glad.h
external/glad/src/glad.c
```

------

### ğŸ§© é…ç½® VS é¡¹ç›®ï¼ˆå…³é”®æ­¥éª¤ï¼‰

å³é”®é¡¹ç›® â†’ å±æ€§ â†’ è®¾ç½®ä»¥ä¸‹å†…å®¹ï¼š

------

#### â‘  C/C++ â†’ General â†’ Additional Include Directories

åŠ å…¥ï¼š

```
$(ProjectDir)include
$(ProjectDir)external\glfw\glfw-3.4\include
$(ProjectDir)external\glad\include
$(ProjectDir)external\glm
```

------

#### â‘¡ Linker â†’ General â†’ Additional Library Directories

åŠ å…¥ï¼š

```
$(ProjectDir)external\glfw\build\src\Release
```

------

#### â‘¢ Linker â†’ Input â†’ Additional Dependencies

åŠ å…¥ï¼š

```
glfw3.lib
opengl32.lib
```

Windows ä¸Šçš„ OpenGL é©±åŠ¨åº“æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œä¸éœ€è¦ä¸‹è½½ã€‚

------

### âš™ï¸ æ·»åŠ  GLAD æºæ–‡ä»¶

å³é”® **æºæ–‡ä»¶** â†’ æ·»åŠ  â†’ ç°æœ‰é¡¹
 æ·»åŠ ï¼š

```
external/glad/src/glad.c
```

------

### ğŸ§ª æ·»åŠ ä¸»ç¨‹åº main.cppï¼ˆåŸºç¡€æ¡†æ¶ï¼‰

åœ¨ `src/main.cpp` å†™å…¥å¦‚ä¸‹ç¨‹åºï¼ˆå·²æµ‹è¯•å¯è¿è¡Œï¼‰ï¼š

```cpp
#include <glad/glad.h>
#include <GLFW/glfw3.h>
#include <iostream>

void framebuffer_size_callback(GLFWwindow* window, int width, int height);
void processInput(GLFWwindow* window);

int main() {
    // åˆå§‹åŒ– GLFW
    if (!glfwInit()) {
        std::cerr << "Failed to initialize GLFW\n";
        return -1;
    }

    // é…ç½® OpenGL ç‰ˆæœ¬ä¸º 3.3 Core
    glfwWindowHint(GLFW_CONTEXT_VERSION_MAJOR, 3);
    glfwWindowHint(GLFW_CONTEXT_VERSION_MINOR, 3);
    glfwWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    // åˆ›å»ºçª—å£
    GLFWwindow* window = glfwCreateWindow(1280, 720, "Fireworks Demo", nullptr, nullptr);
    if (window == nullptr) {
        std::cerr << "Failed to create window\n";
        glfwTerminate();
        return -1;
    }
    glfwMakeContextCurrent(window);
    glfwSetFramebufferSizeCallback(window, framebuffer_size_callback);

    // åˆå§‹åŒ– GLADï¼ˆå¿…é¡»åœ¨ context åï¼‰
    if (!gladLoadGLLoader((GLADloadproc)glfwGetProcAddress)) {
        std::cerr << "Failed to initialize GLAD\n";
        return -1;
    }

    // ä¸»å¾ªç¯
    while (!glfwWindowShouldClose(window)) {
        processInput(window);

        // èƒŒæ™¯é¢œè‰²
        glClearColor(0.02f, 0.02f, 0.05f, 1.0f);
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        // TODO: åœ¨è¿™é‡Œæ¸²æŸ“åœ°é¢ / å¤©ç©ºç›’ / ç²’å­ç³»ç»Ÿ

        glfwSwapBuffers(window);
        glfwPollEvents();
    }

    glfwTerminate();
    return 0;
}

void processInput(GLFWwindow* window) {
    if (glfwGetKey(window, GLFW_KEY_ESCAPE) == GLFW_PRESS)
        glfwSetWindowShouldClose(window, true);
}

void framebuffer_size_callback(GLFWwindow* window, int width, int height) {
    glViewport(0, 0, width, height);
}
```

è¿è¡Œåä½ ä¼šçœ‹åˆ°ä¸€ä¸ªé»‘è‰²çª—å£ï¼Œè¿™å°±æ˜¯ä½ ä»¬çš„åŸºç¡€æ¡†æ¶ã€‚





------

## ğŸ§¨ Fireworks OpenGL â€” é¡¹ç›®æ„å»ºè¯´æ˜ï¼ˆClone åå¿…è¯»ï¼‰

æœ¬é¡¹ç›®åŸºäº **OpenGL + GLFW + GLAD + GLM** å®ç° 3D çƒŸèŠ±ç²’å­ç‰¹æ•ˆã€‚
 è¯¥è¯´æ˜æ–‡æ¡£ç”¨äºæŒ‡å¯¼å›¢é˜Ÿæˆå‘˜åœ¨ clone é¡¹ç›®åå¦‚ä½•åœ¨æœ¬åœ°å®Œæˆæ„å»ºç¯å¢ƒé…ç½®ã€‚

------

### ğŸ—‚ ä¸€ã€é¡¹ç›®ç›®å½•ç»“æ„

```
Fireworks_OpenGL/
â”‚â”€â”€ Fireworks_OpenGL/
â”‚   â”‚â”€â”€ src/               # æ‰€æœ‰ C++ æºæ–‡ä»¶
â”‚   â”‚â”€â”€ include/           # æ‰€æœ‰å¤´æ–‡ä»¶
â”‚   â”‚â”€â”€ assets/            # èµ„æºï¼ˆshaderã€textureã€skyboxã€soundï¼‰
â”‚   â”‚   â”œâ”€â”€ shaders/
â”‚   â”‚   â”œâ”€â”€ textures/
â”‚   â”‚   â”œâ”€â”€ skybox/
â”‚   â”‚   â”œâ”€â”€ sounds/
â”‚   â”‚â”€â”€ external/          # ç¬¬ä¸‰æ–¹åº“ï¼ˆæºç å½¢å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ glfw/
â”‚   â”‚   â”œâ”€â”€ glad/
â”‚   â”‚   â”œâ”€â”€ glm/
â”‚â”€â”€ x64/                   # VS è‡ªåŠ¨ç”Ÿæˆï¼ˆå·²è¢« gitignore å¿½ç•¥ï¼‰
â”‚â”€â”€ Fireworks.sln
â”‚â”€â”€ .gitignore
â”‚â”€â”€ README.md
```

------

### ğŸ›  äºŒã€ç¯å¢ƒä¾èµ–

| å·¥å…·                                  | ç”¨é€”           |
| ------------------------------------- | -------------- |
| **Visual Studio 2022**                | C++17 ç¼–è¯‘ç¯å¢ƒ |
| **CMake**                             | ç”¨äºç¼–è¯‘ GLFW  |
| **Win10/Win11 ç³»ç»Ÿè‡ªå¸¦ OpenGL32.lib** | æ— éœ€å®‰è£…       |

------

### ğŸ§© ä¸‰ã€é…ç½®ç¬¬ä¸‰æ–¹åº“

#### 1. é…ç½® GLFWï¼ˆå¿…é¡»ï¼‰

GLFW ä»¥**æºç å½¢å¼**æ”¾åœ¨ï¼š

```
external/glfw/
```

éœ€è¦æ‰‹åŠ¨ç¼–è¯‘ä¸€æ¬¡ã€‚

#### ç¼–è¯‘æ­¥éª¤

1. æ‰“å¼€ **CMake GUI**
2. è®¾ç½®ï¼š
   - Sourceï¼š`external/glfw/<glfw-version>`
   - Buildï¼š`external/glfw/<glfw-version>/build`
3. ç‚¹å‡» **Configure**
4. ç‚¹å‡» **Generate**
5. ç‚¹å‡» **Open Project**
6. Visual Studio ä¸­ï¼š
   - é€‰æ‹© **Release | x64**
   - Build â†’ Build Solutionï¼ˆç”Ÿæˆ glfw3.libï¼‰

ç”Ÿæˆä½ç½®ï¼š

```
external/glfw/<version>/build/src/Release/glfw3.lib
```

------

#### 2. é…ç½® GLADï¼ˆå¿…é¡»ï¼‰

GLAD ä»¥æºç å½¢å¼æ”¾ç½®åœ¨ï¼š

```
external/glad/include/
external/glad/src/glad.c
```

ä½ ä¸éœ€è¦ç¼–è¯‘å®ƒï¼Œåªéœ€è¦åœ¨ VS ä¸­åŒ…å« glad.cã€‚

æ·»åŠ æ–¹å¼ï¼š

```
å³é”®é¡¹ç›® â†’ Add â†’ Existing Item â†’ external/glad/src/glad.c
```

------

#### 3. GLMï¼ˆè‡ªåŠ¨å¯ç”¨ï¼‰

GLM æ˜¯ header-onlyï¼Œæ— éœ€ç¼–è¯‘ï¼Œè·¯å¾„ï¼š

```
external/glm/
```

------

### âš™ï¸ å››ã€é…ç½® Visual Studio

å³é”®é¡¹ç›® â†’ å±æ€§ â†’ é…ç½®ï¼šRelease / Debugã€å¹³å°ï¼šx64

------

#### ğŸ“Œ 1. C/C++ â†’ General â†’ Additional Include Directories

æ·»åŠ ï¼š

```
$(ProjectDir)include
$(ProjectDir)external\glfw\<version>\include
$(ProjectDir)external\glad\include
$(ProjectDir)external\glm
```

------

#### ğŸ“Œ 2. Linker â†’ General â†’ Additional Library Directories

æ·»åŠ ï¼š

```
$(ProjectDir)external\glfw\<version>\build\src\Release
```

------

#### ğŸ“Œ 3. Linker â†’ Input â†’ Additional Dependencies

æ·»åŠ ï¼š

```
glfw3.lib
opengl32.lib
```

ç³»ç»Ÿè‡ªå¸¦ opengl32.libã€‚

------

### ğŸ§ª äº”ã€æ„å»º & è¿è¡Œ

1. Visual Studio é€‰æ‹©ï¼š
   - **x64**
   - **Debug** æˆ– **Release**
2. ç‚¹å‡» Build â†’ Build Solution
3. è¿è¡Œå³å¯çœ‹åˆ°çª—å£ + ä½ çš„æµ‹è¯•åœºæ™¯ï¼ˆåˆæœŸæ˜¯é»‘è‰²çª—å£æ­£å¸¸ï¼‰

------

### âœ¨ å…­ã€å¸¸è§é—®é¢˜

#### âœ” external/build ç›®å½•ä¸æäº¤

å·²ç»ç”± `.gitignore` è‡ªåŠ¨å¿½ç•¥ã€‚

#### âœ” å¦‚æœ clone åæ— æ³•ç¼–è¯‘ GLFW

ä¸€å®šæ˜¯æ²¡æœ‰è¿è¡Œ CMake
 æˆ– VS ç¼ºå°‘ C++ Desktop Development ç»„ä»¶ã€‚

------

### ğŸ¯ ä¸ƒã€å›¢é˜Ÿæˆå‘˜å¦‚ä½•ç»§ç»­å¼€å‘

1. clone æœ¬é¡¹ç›®
2. é€šè¿‡ CMake ç¼–è¯‘ä¸€æ¬¡ GLFW
3. è®¾ç½® VS é¡¹ç›® include/library ç›®å½•
4. ç¡®ä¿ glad.c è¢«æ·»åŠ 
5. å¼€å§‹ç¼–å†™ src/ ä¸‹çš„æ¨¡å—ä»£ç å³å¯

------



## 
