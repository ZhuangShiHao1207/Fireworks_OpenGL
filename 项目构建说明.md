# ğŸ§¨ é¡¹ç›®æ„å»ºè¯´æ˜

------

æœ¬èŠ‚ä¸»è¦æ˜¯æä¾›ç»™å›¢é˜Ÿæˆå‘˜å¼€å‘ä½¿ç”¨ï¼Œåœ¨ç¬¬ä¸€æ¬¡cloneæœ¬ä»“åº“æ—¶è®°å¾—æŒ‰ç…§æ­¤è¦æ±‚é…ç½®é¡¹ç›®

## ğŸ—‚ ä¸€ã€é¡¹ç›®ç›®å½•ç»“æ„

```
Fireworks_OpenGL/
â”‚â”€â”€ Fireworks_OpenGL/
â”‚   â”‚â”€â”€ src/               # æ‰€æœ‰ C++ æºæ–‡ä»¶
â”‚   â”‚â”€â”€ include/           # æ‰€æœ‰å¤´æ–‡ä»¶
â”‚   â”‚â”€â”€ assets/            # èµ„æº
â”‚   â”‚   â”œâ”€â”€ shaders/
â”‚   â”‚   â”œâ”€â”€ textures/
â”‚   â”‚   â”œâ”€â”€ skybox/
â”‚   â”‚   â”œâ”€â”€ sounds/
â”‚   â”‚   â”œâ”€â”€ fonts/        # UIç”¨å­—ä½“æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ model/         # 3Dæ¨¡å‹æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ground/        # åœ°é¢çº¹ç†
â”‚   â”‚â”€â”€ external/          # ç¬¬ä¸‰æ–¹åº“ï¼ˆæºç å½¢å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ glfw/
â”‚   â”‚   â”œâ”€â”€ glad/
â”‚   â”‚   â”œâ”€â”€ glm/
â”‚â”€â”€ x64/                   # VS è‡ªåŠ¨ç”Ÿæˆï¼ˆå·²è¢« gitignore å¿½ç•¥ï¼‰
â”‚â”€â”€ Fireworks.sln
â”‚â”€â”€ .gitignore
â”‚â”€â”€ README.md
```

------

## ğŸ›  äºŒã€ç¯å¢ƒä¾èµ–

| å·¥å…·                                  | ç”¨é€”            |
| ------------------------------------- | --------------- |
| **Visual Studio 2022**                | C++17 ç¼–è¯‘ç¯å¢ƒ  |
| **CMake**                             | ç”¨äºç¼–è¯‘ GLFW   |
| **vcpkg**                             | ç”¨äºå®‰è£… Assimp |
| **Win10/Win11 ç³»ç»Ÿè‡ªå¸¦ OpenGL32.lib** | æ— éœ€å®‰è£…        |

------

## ğŸ§© ä¸‰ã€é…ç½®ç¬¬ä¸‰æ–¹åº“

### 1. é…ç½® GLFW

GLFW ä»¥**æºç å½¢å¼**æ”¾åœ¨ï¼š

```
external/glfw/
```

éœ€è¦æ‰‹åŠ¨ç¼–è¯‘ä¸€æ¬¡ã€‚

#### ç¼–è¯‘æ­¥éª¤

1. æ‰“å¼€ **CMake GUI**
2. è®¾ç½®ï¼š
   - Sourceï¼š`external/glfw/glfw-3.4`
   - Buildï¼š`external/glfw/glfw-3.4/build`
3. ç‚¹å‡» **Configure**
4. ç‚¹å‡» **Generate**
5. ç‚¹å‡» **Open Project**
6. Visual Studio ä¸­ï¼š
   - é€‰æ‹© **Release | x64**
   - Build â†’ Build Solutionï¼ˆç”Ÿæˆ glfw3.libï¼‰

ç”Ÿæˆä½ç½®ï¼š

```
external/glfw/glfw-3.4/build/src/Release/glfw3.lib
```

------

### 2. é…ç½® GLADï¼ˆå¿…é¡»ï¼‰

GLAD ä»¥æºç å½¢å¼æ”¾ç½®åœ¨ï¼š

```
external/glad/include/
external/glad/src/glad.c
```

ä½ ä¸éœ€è¦ç¼–è¯‘å®ƒï¼Œåªéœ€è¦åœ¨ VS ä¸­åŒ…å« glad.cã€‚

æ·»åŠ æ–¹å¼ï¼š

```
å³é”®é¡¹ç›® â†’ Add â†’ Existing Item â†’ external/glad/src/glad.c
```

------

### 3. GLMï¼ˆè‡ªåŠ¨å¯ç”¨ï¼‰

ä¸‹è½½è·¯å¾„ï¼š[Releases Â· g-truc/glm](https://github.com/g-truc/glm/releases)

GLM æ˜¯ header-onlyï¼Œæ— éœ€ç¼–è¯‘ï¼Œç›´æ¥ä¸‹è½½ zip ç„¶åè§£å‹åˆ°ä¸‹é¢è¿™ä¸ªè·¯å¾„ï¼š

```
external/glm/
```

------

### 4. é…ç½® Assimpâ€”â€”ä½¿ç”¨vcpkg

#### ğŸš€ å®‰è£…æ­¥éª¤

**æ­¥éª¤ 1ï¼šå®‰è£… vcpkgï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰**

å¦‚æœä½ çš„ç”µè„‘ä¸Šè¿˜æ²¡æœ‰ vcpkgï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤å®‰è£…ï¼š

```powershell
# 1. å…‹éš† vcpkg ä»“åº“åˆ°ä»»æ„ç›®å½•ï¼ˆç¬¬ä¸€è¡Œè‡ªå·±é€‰æ‹©è·¯å¾„ï¼‰
cd C:\
git clone https://github.com/microsoft/vcpkg.git
cd vcpkg

# 2. è¿è¡Œ bootstrap è„šæœ¬
.\bootstrap-vcpkg.bat

# 3. é›†æˆåˆ° Visual Studioï¼ˆå¯é€‰ä½†æ¨èï¼‰
.\vcpkg integrate install
```

**æ­¥éª¤ 2ï¼šå®‰è£… Assimp**

```powershell
# åœ¨ vcpkg ç›®å½•ä¸‹è¿è¡Œ
.\vcpkg install assimp:x64-windows
```

å®‰è£…å®Œæˆåï¼ŒAssimp åº“ä¼šè¢«å®‰è£…åˆ°ï¼š

```
[vcpkgå®‰è£…è·¯å¾„]\installed\x64-windows\
â”œâ”€â”€ include\assimp\     # å¤´æ–‡ä»¶
â”œâ”€â”€ lib\                # Release åº“æ–‡ä»¶
â”‚   â””â”€â”€ assimp-vc143-mt.lib
â”œâ”€â”€ debug\lib\          # Debug åº“æ–‡ä»¶
â”‚   â””â”€â”€ assimp-vc143-mtd.lib
â””â”€â”€ bin\                # DLL æ–‡ä»¶
    â””â”€â”€ assimp-vc143-mt.dll
```

**æ­¥éª¤ 3ï¼šé…ç½® Visual Studio é¡¹ç›®**

æ‰“å¼€ Visual Studioï¼Œå³é”®é¡¹ç›® â†’ å±æ€§ â†’ ç¡®ä¿é…ç½®ä¸º **x64**

**3.1 é…ç½® Include ç›®å½•**

åœ¨ `C/C++ â†’ General â†’ Additional Include Directories` ä¸­æ·»åŠ ï¼š

```
$(ProjectDir)include
$(ProjectDir)external\glfw\glfw-3.4\include
$(ProjectDir)external\glad\include
$(ProjectDir)external\glm
$(VcpkgRoot)installed\x64-windows\include
```

**ç¤ºä¾‹**ï¼ˆå‡è®¾ vcpkg åœ¨ C:\vcpkgï¼‰ï¼š

```
C:\vcpkg\installed\x64-windows\include
```

**3.2 é…ç½® Library ç›®å½•**

åœ¨ `Linker â†’ General â†’ Additional Library Directories` ä¸­æ·»åŠ ï¼š

æ³¨ï¼šä¸‹é¢çš„æ‰€æœ‰Debugé…ç½®å’ŒReleaseé…ç½®çš„è®¾ç½®åªè¦åœ¨å·¦ä¸Šè§’åˆ‡æ¢Release/Debugè¿›è¡Œé…ç½®å³å¯ï¼Œå¦‚æœå«Œéº»çƒ¦å¯ä»¥åªé…ç½®Release

**Debug é…ç½®**ï¼š

```
$(ProjectDir)external\glfw\glfw-3.4\build\src\Release
$(VcpkgRoot)installed\x64-windows\debug\lib
```

**Release é…ç½®**ï¼š

```
$(ProjectDir)external\glfw\glfw-3.4\build\src\Release
$(VcpkgRoot)installed\x64-windows\lib
```

**3.3 é…ç½®é“¾æ¥åº“**

åœ¨ `Linker â†’ Input â†’ Additional Dependencies` ä¸­æ·»åŠ ï¼š

**Debug é…ç½®**ï¼š

```
glfw3.lib
opengl32.lib
assimp-vc143-mtd.lib
freetyped.lib
```

**Release é…ç½®**ï¼š

```
glfw3.lib
opengl32.lib
assimp-vc143-mt.lib
freetype.lib
```

**æ­¥éª¤ 4ï¼šå¤åˆ¶ DLL æ–‡ä»¶**

Assimp éœ€è¦ DLL æ‰èƒ½è¿è¡Œï¼Œéœ€è¦å°† DLL å¤åˆ¶åˆ°å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•ï¼š

åœ¨ Visual Studio ä¸­ï¼Œé¡¹ç›® â†’ å±æ€§ â†’ ç”Ÿæˆäº‹ä»¶ â†’ ç”Ÿæˆåäº‹ä»¶ â†’ å‘½ä»¤è¡Œï¼Œæ·»åŠ ï¼š

```cmd
xcopy /y /d "$(VcpkgRoot)\installed\x64-windows\bin\assimp-vc143-mt.dll" "$(OutDir)"
```

ï¼ˆå°† `C:\vcpkg` æ›¿æ¢ä¸ºä½ çš„å®é™… vcpkg è·¯å¾„ï¼‰

### 5. é…ç½® freetype â€” ä½¿ç”¨ vcpkg(å·²å®‰è£…)

#### ä½¿ç”¨vcpkgå®‰è£…FreeType

```bash
# æ‰“å¼€PowerShellï¼Œè¿›å…¥vcpkgç›®å½•
cd C:\vcpkg  # æ ¹æ®ä½ çš„å®é™…è·¯å¾„
.\vcpkg install freetype:x64-windows
```

#### é…ç½®Visual Studioé¡¹ç›®

åœ¨é¡¹ç›®å±æ€§ä¸­æ·»åŠ ï¼š

C/C++ â†’ å¸¸è§„ â†’ é™„åŠ åŒ…å«ç›®å½•ï¼ˆæ·»åŠ ï¼‰ï¼š

```text
$(VcpkgRoot)\installed\x64-windows\include
```

é“¾æ¥å™¨ â†’ å¸¸è§„ â†’ é™„åŠ åº“ç›®å½•ï¼ˆæ·»åŠ ï¼‰ï¼š

Debugé…ç½®ï¼š

```text
$(VcpkgRoot)\installed\x64-windows\debug\lib
```

Releaseé…ç½®ï¼š

```text
$(VcpkgRoot)\installed\x64-windows\lib
```

é“¾æ¥å™¨ â†’ è¾“å…¥ â†’ é™„åŠ ä¾èµ–é¡¹ï¼ˆæ·»åŠ ï¼‰ï¼š

Debugé…ç½®ï¼š

```text
freetyped.lib
```

Releaseé…ç½®ï¼š

```text
freetype.lib
```

------

## âš™ï¸ å››ã€é…ç½® Visual Studioï¼ˆå®Œæ•´ç‰ˆï¼Œå¯ç”¨äºæ£€æŸ¥ï¼‰

å³é”®é¡¹ç›® â†’ å±æ€§ â†’ é…ç½®ï¼šRelease / Debugã€å¹³å°ï¼šx64

è¯·æ³¨æ„ï¼šä¸è¦ä½¿ç”¨ç»å¯¹è·¯å¾„ï¼Œè¿™ä¼šå½±å“åˆ°å…¶ä»–åŒå­¦ï¼Œç”¨$()è¿™ç§å®çš„æ–¹å¼é…ç½®

------

### ğŸ“Œ 1. C/C++ â†’ General â†’ Additional Include Directories

**å®Œæ•´é…ç½®**ï¼š

```
$(ProjectDir)include
$(ProjectDir)external\glfw\glfw-3.4\include
$(ProjectDir)external\glad\include
$(ProjectDir)external\glm
$(VcpkgRoot)installed\x64-windows\include
```

------

### ğŸ“Œ 2. Linker â†’ General â†’ Additional Library Directories

**Debug é…ç½®**ï¼š

```
$(ProjectDir)external\glfw\glfw-3.4\build\src\Release
$(VcpkgRoot)installed\x64-windows\debug\lib
```

**Release é…ç½®**ï¼š

```
$(ProjectDir)external\glfw\glfw-3.4\build\src\Release
$(VcpkgRoot)installed\x64-windows\lib
```

------

### ğŸ“Œ 3. Linker â†’ Input â†’ Additional Dependencies

**Debug é…ç½®**ï¼š

```
glfw3.lib
opengl32.lib
assimp-vc143-mtd.lib
```

**Release é…ç½®**ï¼š

```
glfw3.lib
opengl32.lib
assimp-vc143-mt.lib
```

------

### ğŸ“Œ 4. Build Events â†’ Post-Build Eventï¼ˆæ¨èï¼‰

Command Lineï¼š

```cmd
xcopy /y /d "$(VcpkgRoot)\installed\x64-windows\bin\assimp-vc143-mt.dll" "$(OutDir)"
xcopy /y /d "$(VcpkgRoot)\installed\x64-windows\bin\freetype.dll" "$(OutDir)"
```

