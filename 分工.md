
## 👥 五人分工（重新设计）

### **Person A - 项目架构师（Project Lead）**
**核心职责：** 搭建框架 + 整合所有模块

#### 交付物清单
```
src/
├── main.cpp              # 主程序入口、渲染循环
├── Window.h/cpp          # GLFW 窗口管理
├── Camera.h/cpp          # 摄像机系统（视角控制）
├── Shader.h/cpp          # Shader 加载与管理
└── ResourceManager.h/cpp # 统一资源管理（纹理、模型）
```

#### 具体任务
- [x] **Week 1（1-3天）**
  - [ ] OpenGL + GLFW + GLAD 环境配置
  - [ ] 创建窗口，实现基本渲染循环
  - [ ] 摄像机类（支持鼠标/键盘控制）
  - [ ] Shader 加载工具类
  
- [x] **Week 2（4-7天）**
  - [ ] 整合其他人的模块（Scene、Particle、Lighting）
  - [ ] 制定统一的坐标系和单位
  - [ ] 设计主循环结构（Update → Render → PostProcess）
  
- [x] **Week 3（8-14天）**
  - [ ] 性能优化（FPS 计数、VSync）
  - [ ] 调试工具（ImGui 可选）
  - [ ] 最终集成与 Bug 修复

#### 关键接口设计
```cpp
class Application {
public:
    void init();           // 初始化所有系统
    void update(float dt); // 更新逻辑
    void render();         // 渲染所有对象
    void cleanup();        // 清理资源
};
```

---

### **Person B - 场景渲染工程师（Scene Renderer）**
**核心职责：** 天空盒 + 地面 + 基础场景

#### 交付物清单
```
src/scene/
├── Skybox.h/cpp          # 天空盒（立方体贴图）
├── Ground.h/cpp          # 地面平面（接收光照）
└── Mesh.h/cpp            # 通用网格类（顶点、索引）
```

#### 具体任务
- [x] **Week 1（1-3天）**
  - [ ] 实现天空盒渲染（Cubemap 加载）
  - [ ] 创建地面平面（Plane Mesh）
  - [ ] 地面材质设置（准备接收光照）
  
- [x] **Week 2（4-7天）**
  - [ ] 优化天空盒（去掉深度测试优化）
  - [ ] 地面网格细分（提升光照效果）
  - [ ] 可选：添加简单建筑物或树木剪影
  
- [x] **Week 3（8-14天）**
  - [ ] 场景美化（调整颜色、贴图）
  - [ ] 与光照模块联调

#### 关键接口
```cpp
class Ground {
public:
    void setupMesh();      // 生成顶点数据
    void render(Shader& shader);
    void setMaterial(Material mat);
};

class Skybox {
public:
    void loadCubemap(std::vector<std::string> faces);
    void render(Camera& camera);
};
```

---

### **Person C - 粒子系统工程师（Particle System）**
**核心职责：** 烟花粒子的核心逻辑

#### 交付物清单
```
src/particle/
├── Particle.h            # 单个粒子数据结构
├── ParticleEmitter.h/cpp # 粒子发射器
├── Firework.h/cpp        # 烟花类（管理粒子生命周期）
└── FireworkTypes.h/cpp   # 不同类型烟花（球形、心形、环形）
```

#### 具体任务
- [x] **Week 1（1-3天）**
  - [ ] 设计粒子数据结构
    ```cpp
    struct Particle {
        glm::vec3 position;
        glm::vec3 velocity;
        glm::vec4 color;
        float lifetime;
        float size;
    };
    ```
  - [ ] 实现基础粒子发射器
  - [ ] 粒子更新逻辑（重力、速度、寿命）
  
- [x] **Week 2（4-7天）**
  - [ ] 实现 3 种烟花类型：
    - 球形爆炸（均匀分布）
    - 环形烟花（极坐标）
    - 心形/星形（参数方程）
  - [ ] 二次爆炸效果
  - [ ] 颜色渐变系统
  
- [x] **Week 3（8-14天）**
  - [ ] 粒子池优化（避免频繁 new/delete）
  - [ ] 添加拖尾效果
  - [ ] 与渲染模块联调

#### 关键接口
```cpp
class Firework {
public:
    void launch(glm::vec3 pos, FireworkType type);
    void update(float dt);
    std::vector<Particle>& getParticles();
    bool isAlive();
};

enum class FireworkType {
    SPHERE,    // 球形
    RING,      // 环形
    HEART      // 心形
};
```

---

### **Person D - 光照工程师（Lighting）**
**核心职责：** 动态光源 + Blinn-Phong 光照

#### 交付物清单
```
src/lighting/
├── Light.h/cpp           # 点光源数据结构
├── LightManager.h/cpp    # 管理多个动态光源
└── shaders/
    ├── ground.vert       # 地面顶点着色器
    ├── ground.frag       # 地面片段着色器（Blinn-Phong）
```

#### 具体任务
- [x] **Week 1（1-3天）**
  - [ ] 实现点光源数据结构
    ```cpp
    struct PointLight {
        glm::vec3 position;
        glm::vec3 color;
        float intensity;
        float attenuation;
    };
    ```
  - [ ] Blinn-Phong 光照 Shader
  - [ ] 地面光照测试（单光源）
  
- [x] **Week 2（4-7天）**
  - [ ] 动态光源管理（添加/删除）
  - [ ] 多光源支持（最多 8-10 个）
  - [ ] 光源随烟花爆炸同步开启/关闭
  
- [x] **Week 3（8-14天）**
  - [ ] 光照衰减优化
  - [ ] 光源颜色与烟花颜色匹配
  - [ ] 与粒子系统联调

#### 关键接口
```cpp
class LightManager {
public:
    int addLight(PointLight light);  // 返回光源 ID
    void removeLight(int id);
    void updateLight(int id, PointLight light);
    void bindToShader(Shader& shader);
};
```

---

### **Person E - 后处理工程师（Post-Processing）**
**核心职责：** 辉光效果 + 高斯模糊

#### 交付物清单
```
src/postprocess/
├── FrameBuffer.h/cpp     # FBO 管理
├── BloomEffect.h/cpp     # 辉光效果
└── shaders/
    ├── blur.vert/frag    # 高斯模糊着色器
    ├── bloom.frag        # 亮度提取
    └── final.frag        # 最终合成
```

#### 具体任务
- [x] **Week 1（1-3天）**
  - [ ] 学习 FBO 和多 Render Target
  - [ ] 实现基础 FBO 封装
  - [ ] 简单的屏幕后处理（灰度测试）
  
- [x] **Week 2（4-7天）**
  - [ ] 高斯模糊实现（两次 Pass）
  - [ ] 亮度提取（提取高亮区域）
  - [ ] Bloom 合成
  
- [x] **Week 3（8-14天）**
  - [ ] 参数调优（模糊半径、阈值）
  - [ ] 性能优化（降采样）
  - [ ] 多级辉光（可选）

#### 关键接口
```cpp
class BloomEffect {
public:
    void init(int width, int height);
    void begin();  // 绑定 FBO
    void end();    // 解绑
    void render(GLuint sceneTexture);  // 应用辉光
};
```

---

## 📅 时间线（里程碑制）

### **Milestone 1: 基础框架（第 1-3 天）**
**目标：** 能看到窗口 + 天空盒 + 地面 + 简单粒子

| 人员 | 任务 | 验收标准 |
|------|------|----------|
| A | 窗口 + 摄像机 | 能用鼠标控制视角 |
| B | 天空盒 + 地面 | 能看到黑夜背景和平面 |
| C | 简单粒子测试 | 100 个粒子向上飞 |
| D | 单光源测试 | 地面有一个光照效果 |
| E | FBO 测试 | 能渲染到纹理 |

**集成测试：** A 整合所有人代码，能跑起来

---

### **Milestone 2: 核心功能（第 4-10 天）**
**目标：** 3 种烟花 + 动态光照 + 基础辉光

| 人员 | 任务 | 验收标准 |
|------|------|----------|
| A | 主循环优化 | 稳定 60 FPS |
| B | 场景美化 | 地面材质 + 细节 |
| C | 3 种烟花类型 | 按键 1/2/3 切换 |
| D | 多光源系统 | 支持 5+ 同时爆炸 |
| E | 辉光效果 | 烟花有明显光晕 |

**集成测试：** 完整演示不同烟花 + 光照

---

### **Milestone 3: 交互与优化（第 11-14 天）**
**目标：** 鼠标交互 + 音效 + 视频录制

| 人员 | 任务 |
|------|------|
| A | 鼠标点击发射 |
| B | 场景最终调整 |
| C | 粒子性能优化 |
| D | 光照最终调整 |
| E | 音效 + 自动演示脚本 |

**最终产物：** 
- 完整可运行程序
- 30 秒演示视频
- 答辩 PPT

---

## ⚙️ 协作规范

### 1. 代码规范
```cpp
// 统一命名风格
class ClassName {};           // 大驼峰
void functionName() {}        // 小驼峰
float m_memberVariable;       // 成员变量加 m_ 前缀
```

### 2. Git 分支管理
```bash
main                  # 稳定版本
├── dev               # 开发分支
    ├── feature-particle
    ├── feature-lighting
    └── feature-bloom
```

### 3. 每周同步会议（30 分钟）
- **周一晚上：** 展示本周进度 + 演示代码
- **周三晚上：** Bug 讨论 + 接口对齐
- **周五晚上：** 集成测试 + 下周计划

### 4. 接口文档（必须先定义）
在 `docs/interfaces.md` 中写清楚：
```markdown
## ParticleSystem → Lighting
- 每次烟花爆炸调用：`lightManager.addLight(pos, color)`
- 烟花结束调用：`lightManager.removeLight(id)`

## Lighting → Shader
- Uniform 变量：`u_PointLights[8]`
- 结构体定义：`PointLight { vec3 pos; vec3 color; float intensity; }`
```

---

## 🎯 最终检查清单

- [ ] 天空盒正常渲染
- [ ] 地面有光照效果
- [ ] 至少 3 种烟花类型
- [ ] 烟花爆炸时地面变亮
- [ ] 辉光效果明显
- [ ] 键盘切换烟花类型
- [ ] 鼠标点击发射烟花
- [ ] 爆炸音效同步
- [ ] 录制高质量演示视频
- [ ] 答辩 PPT 准备完成

---

## 💡 成功的关键

1. **接口先行**：不要等别人做完，先定义好接口
2. **小步快跑**：每 2-3 天就集成一次，别等到最后
3. **视觉优先**：好看比复杂重要，多调参数
4. **留足时间**：最后 3 天只做录视频和 PPT，不写新代码

按这个方案执行，稳拿高分！🎉

